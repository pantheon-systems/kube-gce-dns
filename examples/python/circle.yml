machine:
  python:
    version: 3.5.2
  environment:
    # We deploy to Google Container Engine, these variables control the target.
    CLOUDSDK_CORE_PROJECT: pantheon-internal
    CLUSTER_ID: cluster-01
    CLOUDSDK_COMPUTE_ZONE: us-central1-b
    CLOUDSDK_PYTHON: /usr/bin/python2.7 # https://code.google.com/p/google-cloud-sdk/issues/detail?id=355
    PATH: /home/ubuntu/google-cloud-sdk/bin:$PATH
  services:
    - docker

dependencies:
  override:
    - make deps-circle
    - make deps

test:
  override:
    - make test-circle

deployment:
  release:
    branch:
      - master
    commands:
      - make deploy check-deployment-status KUBE_NAMESPACE=template-sandbox
      - make deploy check-deployment-status


